<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>A Drink Mixing Architecture - Rusty Nail Notes and Documentation</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Rusty Nail Notes and Documentation">
    <meta property="og:image" content="None/../../">
    <meta name="apple-mobile-web-app-title" content="Rusty Nail Notes and Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-a422ff04cc.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Notes <i class="icon icon-link"></i>
              
            
          </span>
        
        A Drink Mixing Architecture
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="/" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          Rusty Nail Notes and Documentation
          <span class="version">
            
          </span>
        </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Index" href="../..">
      Index
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Documentation" href="../../doc/rusty_nail/">
      Documentation
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Notes</span>
    <ul>
      
        
  <li>
    <a class="" title="Setting Up A Beaglebone With Rust" href="../2016-12-11-setting-up-beaglebone-with-rust/">
      Setting Up A Beaglebone With Rust
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Blinking An LED With Rust" href="../2016-12-13-blinking-a-led-with-rust/">
      Blinking An LED With Rust
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="PWM With Rust" href="../2016-12-15-pwming-with-rust/">
      PWM With Rust
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Parts For A Seltzer Air Pump" href="../2016-12-17-hardware-pumping-seltzer/">
      Parts For A Seltzer Air Pump
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Test Of Air Pump" href="../2016-12-22-air-pump-test/">
      Test Of Air Pump
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="A Drink Mixing Architecture" href="./">
      A Drink Mixing Architecture
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Starting off the day with some learning about Rust!" href="#starting-off-the-day-with-some-learning-about-rust">
                Starting off the day with some learning about Rust!
              </a>
            </li>
          
            <li class="anchor">
              <a title="Architecture" href="#architecture">
                Architecture
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="Moving Error Handling to Error Chains" href="../2017-01-02-error-chain/">
      Moving Error Handling to Error Chains
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="an-architecture-for-pumping-drinks">An Architecture For Pumping Drinks</h1>
<h2 id="starting-off-the-day-with-some-learning-about-rust">Starting off the day with some learning about Rust!</h2>
<p>I started off the day off by watching the <a href="http://intorust.com">into_rust()</a>
video lectures and exercises! These really helped me improve my understanding of
Rust's Ownership model. My understanding was still stuck in C/C++!</p>
<h2 id="architecture">Architecture</h2>
<p>Let's start-off by making a little bit of an architecture! The following
picture was taken from a quick sketch I did, but I believe it has the
core pieces. This architecture only goes up to the <code>web api</code>. The front-end
website will be dealt with later.</p>
<p><img alt="Architecture" src="../../assets/images/architecture/rusty-nail-architecture-001.svg" /></p>
<p>Some terms that are in the diagram:</p>
<ul>
<li><code>dispenser</code>: Is an abstraction of the pump. it maintains state of how much liquid is in it, how to pump it at a given rate, and how to pump a given quantity.</li>
<li><code>recipe</code>: A recipe is a listing of all of the liquids which need to be mixed (by name) and how much of each of them to make a givent quantity (in <em>mL</em>). Recipes also include information about user interactions, such as, if the drink should be mixed or stirred, or if ice should be added. Recipes have names and cam be looked up.</li>
<li><code>mixer</code>: A <code>mixer</code> contains a list of named <code>dispensers</code>. The <code>dispensers</code> get there name from a configuration file, or from the <code>api</code>, the <code>mixer</code> also sends down information about the liquid levels. A <code>mixer</code> creates a drink by taking a <code>recipe</code> and <code>quantity</code> as input. System status information is relayed through the <code>mixer</code> to the LEDs</li>
</ul>
<p>The goal is to create a service which will provide an HTTP API using one of
Rust's web micro-frameworks (
<a href="https://github.com/iron/iron">Iron</a>,
<a href="https://github.com/fengsp/pencil">pencil</a>,
<a href="https://github.com/SergioBenitez/Rocket">rocket</a>, etc.). After that is tested
I will begin work on a basic frontend.</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../2016-12-22-air-pump-test/" title="Test Of Air Pump">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Test Of Air Pump
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../2017-01-02-error-chain/" title="Moving Error Handling to Error Chains">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Moving Error Handling to Error Chains
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = '';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>